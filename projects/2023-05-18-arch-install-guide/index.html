<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Arch Linux Installation Guide | Filip Livancic</title>
<meta name="keywords" content="üíª Systems">
<meta name="description" content="Step-by-step guide for installing Arch Linux from scratch on a VM">
<meta name="author" content="">
<link rel="canonical" href="https://filpill.github.io/projects/2023-05-18-arch-install-guide/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.655e31e5f2a68813836a80ebda575f730895aae7b904bad3f80dbb089f3a6420.css" integrity="sha256-ZV4x5fKmiBODaoDr2ldfcwiVque5BLrT&#43;A27CJ86ZCA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://filpill.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://filpill.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://filpill.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://filpill.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://filpill.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://filpill.github.io/projects/2023-05-18-arch-install-guide/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Arch Linux Installation Guide" />
<meta property="og:description" content="Step-by-step guide for installing Arch Linux from scratch on a VM" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://filpill.github.io/projects/2023-05-18-arch-install-guide/" />
<meta property="og:image" content="https://filpill.github.io/img/arch/install_process/45.jpg" /><meta property="article:section" content="projects" />
<meta property="article:published_time" content="2023-05-18T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-05-18T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://filpill.github.io/img/arch/install_process/45.jpg" />
<meta name="twitter:title" content="Arch Linux Installation Guide"/>
<meta name="twitter:description" content="Step-by-step guide for installing Arch Linux from scratch on a VM"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "List of Articles",
      "item": "https://filpill.github.io/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Arch Linux Installation Guide",
      "item": "https://filpill.github.io/projects/2023-05-18-arch-install-guide/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Arch Linux Installation Guide",
  "name": "Arch Linux Installation Guide",
  "description": "Step-by-step guide for installing Arch Linux from scratch on a VM",
  "keywords": [
    "üíª Systems"
  ],
  "articleBody": "Introduction This guide details the installation procedure of Arch onto a Virtual Machine (VM). Network configuration is not in the scope of this guide if you are installing on bare metal.\nThe motivation behind this web page is to keep some guidance material for myself and also for anybody new looking to install Arch from scratch.\nThe virtual machine is made with Microsoft‚Äôs Hyper-V program. The steps may differ slightly if you choose to use a another hypervisor such as VirtualBox.\nArch Linux ISO Download Link You can find the download link to the Arch Linux ISO here: https://archlinux.org/download/\nThe recommended way to pull down the ISO file is by torrenting it from the referenced magnet link.\nWhen the download is complete, you can configure your virtual machine.\nCreating a Hyper-V Virtual Machine 1. Create New Virtual Machine The first step is to open up Hyper-V and create a new virtual machine 2. Select VM Generation You will be asked which generation of VM to create. I would reccommend to select ‚ÄúGeneration 2‚Äù. It supports UEFI firmware and it should be better from a cyber-security standpoint. 3. Allocate Memory You can specify how much memory to allocate to the VM. I decided to allocate 4000MB in my use case. 4. Configure Network Adapter Hyper-V has a built in network adapter that works out of the box, so you‚Äôd want to select ‚ÄúDefault Switch‚Äù to have it enabled. 5. Create Virtual Hard Disk For the VM you should create a virtual hard disk to store the data. I decided to allocate 30GB of storage space. 6. Select .iso Image You need to select the arch linux ISO file to boot from and then you can finalise the VM creation. 7. Go to Settings We are not done yet, we still need to configure 2 more things in the settings panel of this VM we just created. 8. Disable Secure Boot We need to disable Secure Boot, if you do not do this step, it will interfere with your ability to boot the ISO image. 9. Change Boot Priority Next we need to bump the Hard Drive to the first priority of boot loading. Its very important that you do this step before you start installing linux otherwise the Grub will fail down the line because it will be trying to boot from the DVD Drive. You will not be able to retroactively change the boot order at a later stage. After applying the changes:\n10. Fixing Hyper-V Resolution (Powershell) Oddly enough we do not have GUI setting for adjusting the resolution of the VM which is bizzare for a windows tool. Therefore we will need to use Powershell (with Admin permissions) to fix this.\nIn powershell you can run the following command to set the maximum resolution of the VM (Please replace the respective VMName in quotations with the VM you just created.):\nSet-VMVideo -VMName 'ArchVM' -HorizontalResolution 1920 -VerticalResolution 1080 -ResolutionType Single 11. Start the VM Connect to the VM: Start the VM: Installing Arch Linux From this screen select the highlighted option to load the ISO image The install process starts here: 1. Verify Internet Connection Before going any further, you should ping a website to test your internet connection:\nping archlinux.org The Hyper-V default network switch should automatically provide your VM with the internet connection. If not, you will probably need to configure Hyper-V to alleviate networking issues.\n2. Synchronise System Clock We also need to synchronise the systems clock with the network time:\ntimedatectl set-ntp true 3. Drive Partitioning Now we need to start partitioning our drives and creating our file system.\nThe lsblk command indicates which drives and partitions are on your system. And we can use cfdisk to partition the drives. Type the command to start partitioning your virtualised disk:\ncfdisk /dev/sda At this juncture we need to assign the disk label type and it comes down to two options mainly:\nIf the hardware is new and the drive \u003e= 2TB, use gpt. Otherwise use dos. For our scenario we are using dos\nDecide on a partition scheme. I will keep it simple and reduce it to a boot and root partition:\n/dev/sda1 (boot partition) only needs about 128MB of space and needs to be bootable. You can press b to enable the boot flag after making the partition. /dev/sda2 (root partition) can be assigned the remaining space of the disk. Write the changes and quit out of cfdisk. If you lsblk now, you will now see that 2 partitions have been made which are called sda1 and sda2.\n4. Creating File Systems We also need to make the file systems for each partition:\nsda1 (boot) is FAT32 file system. sda2 (root) is ext4 file system. Run these commands to create the file systems respectively:\nmkfs.fat -F 32 /dev/sda1 mkfs.ext4 /dev/sda2 5. Mounting the File Systems Now the mounting procedure MUST go in a specific order:\nsda2 (root) is mounted first to /mnt sda1 (boot) is mounted last to /mnt/boot/efi mount /dev/sda2 /mnt Warning: If you mount in reverse order, the install will fail!\nFor the boot partition, you will need to make a directory with this path /mnt/boot/efi:\ncd /mnt mkdir boot cd /mnt/boot mkdir efi Since we have a UEFI system config, we need this extra efi directory (normally we do not). Now we can mount the filesystem for boot:\nmount /dev/sda1 /mnt/boot/efi 6. Installing Essential Packages At this stage, you are ready install the base tools for the system in addition to the Linux kernel.\nUse the pacstrap command to install the following tools to /mnt:\npacstrap /mnt base base-devel linux linux-firmware vim 7. Generate fstab Configuration Run the following command to generate your fstab configuration:\ngenfstab -U /mnt \u003e\u003e /mnt/etc/fstab genfstab -U /mnt 8. Chroot Change root into new system by running this command:\narch-chroot /mnt /bin/bash 9. Install Key Packages Pacman is our package manager and we can use it to install some key packages:\nnetworkmanager - Detection and configuration of systems to connect to networks grub - Bootloader for the computer efibootmgr - Package dependency for grub‚Äôs installation command pacman -S networkmanager grub efibootmgr 10. Auto-enable Internet on Startup We can use systemctl to enable network manager as a service which starts automatically when you boot the computer (which is very useful to have).\nsystemctl enable NetworkManager 11. Install and Configure Grub Next we run the grub-install command on /dev/sda; it should run with no errors:\ngrub-install /dev/sda We need to make a config file for grub, with the following command:\ngrub-mkconfig -o /boot/grub/grub.cfg We need to edit this grub file:\nvim /etc/default/grub Uncomment the line ‚ÄúGRUB_DISABLE_OS_PROBER=false‚Äù and then save the file.\nYou may also want to edit the following grub variables if you wish to change the resolution of grub:\nGRUB_CMD_LINUX_DEFAULT GRUB_GFXMODE GRUB_CMD_LINUX_DEFAULT=\"quiet splash video=hyperv_fb:1920x1080\" GRUB_GFXMODE=1920x1080 Note: The video parameter may be different if you are doing this bare metal or are using another VM software.\nSave and exit from the grub file.\nNow you will need to enact those changes onto the grub.cfg file which is read at boot time. So you will need to run the following command:\ngrub-mkconfig -o /boot/grub/grub.cfg After rebooting your Linux machine, your terminal should automatically scale to the 1080p resolution without having to make changes using commands like xrandr -s 1920x1080 inside the display server.\n12. Set Root Password Run the passwd command to set a root password for the machine 13. Localization Edit /etc/locale.gen to change the language settings of the machine.\nvim /etc/locale.gen Uncomment the lines that apply to your language of choice. Run locale-gen command to generate the locales you have selected:\nlocale-gen Edit /etc/locale.conf and set the language being used:\nvim /etc/locale.conf Enter the LANG variable into the file with the relevant language setting:\nLANG=en_GB.UTF-8 14. Hostname Edit /etc/hostname:\nvim /etc/hostname The word you type in here will be the name of your computer. I decided to call mine arch. But it can be anything you want. Save and close the file.\n15. Timezone You can set the time zone with the following command:\nln -sf /usr/share/zoneinfo/Greenwich /etc/localtime Greenwich can be substituted for any region within that zoneinfo directory.\n15. Rebooting We are ready to reboot the system. First we need to exit the root environment and to unmount all the partitions. Then we can reboot.\nexit umount -R /mnt reboot If successful you should be greeted with this screen. You can select Arch Linux to boot into the system. And you should see a tty appear on your screen.\nWe do not have any users set up on the system (yet).\nSimply login as the root user. The root password is what you set earlier in the setup process.\nThat‚Äôs about it, you now have a base install of Arch Linux.\nFrom this point you are free to customise your desktop to your liking.\n",
  "wordCount" : "1477",
  "inLanguage": "en",
  "image":"https://filpill.github.io/img/arch/install_process/45.jpg","datePublished": "2023-05-18T00:00:00Z",
  "dateModified": "2023-05-18T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://filpill.github.io/projects/2023-05-18-arch-install-guide/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Filip Livancic",
    "logo": {
      "@type": "ImageObject",
      "url": "https://filpill.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({ startOnLoad: true, securityLevel: 'loose'}});</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://filpill.github.io/" accesskey="h" title="Filip Livancic (Alt + H)">Filip Livancic</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://filpill.github.io/profile/" title="üë§ Profile">
                    <span>üë§ Profile</span>
                </a>
            </li>
            <li>
                <a href="https://filpill.github.io/archives/" title="üìÅ Archive">
                    <span>üìÅ Archive</span>
                </a>
            </li>
            <li>
                <a href="https://filpill.github.io/tags/" title="üè∑Ô∏è Categories">
                    <span>üè∑Ô∏è Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://filpill.github.io/">Home</a>&nbsp;¬ª&nbsp;<a href="https://filpill.github.io/projects/">List of Articles</a></div>
    <h1 class="post-title">
      Arch Linux Installation Guide
    </h1>
    <div class="post-description">
      Step-by-step guide for installing Arch Linux from scratch on a VM
    </div>
    <div class="post-meta"><span title='2023-05-18 00:00:00 +0000 UTC'>May 18, 2023</span>&nbsp;¬∑&nbsp;7 min&nbsp;¬∑&nbsp;1477 words

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://filpill.github.io/img/arch/install_process/45.jpg" alt="Arch Linux Neofetch">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a><ul>
                        
                <li>
                    <a href="#arch-linux-iso-download-link" aria-label="Arch Linux ISO Download Link">Arch Linux ISO Download Link</a></li>
                <li>
                    <a href="#creating-a-hyper-v-virtual-machine" aria-label="Creating a Hyper-V Virtual Machine">Creating a Hyper-V Virtual Machine</a><ul>
                        
                <li>
                    <a href="#1-create-new-virtual-machine" aria-label="1. Create New Virtual Machine">1. Create New Virtual Machine</a></li>
                <li>
                    <a href="#2-select-vm-generation" aria-label="2. Select VM Generation">2. Select VM Generation</a></li>
                <li>
                    <a href="#3-allocate-memory" aria-label="3. Allocate Memory">3. Allocate Memory</a></li>
                <li>
                    <a href="#4-configure-network-adapter" aria-label="4. Configure Network Adapter">4. Configure Network Adapter</a></li>
                <li>
                    <a href="#5-create-virtual-hard-disk" aria-label="5. Create Virtual Hard Disk">5. Create Virtual Hard Disk</a></li>
                <li>
                    <a href="#6-select-iso-image" aria-label="6. Select .iso Image">6. Select .iso Image</a></li>
                <li>
                    <a href="#7-go-to-settings" aria-label="7. Go to Settings">7. Go to Settings</a></li>
                <li>
                    <a href="#8-disable-secure-boot" aria-label="8. Disable Secure Boot">8. Disable Secure Boot</a></li>
                <li>
                    <a href="#9-change-boot-priority" aria-label="9. Change Boot Priority">9. Change Boot Priority</a></li>
                <li>
                    <a href="#10-fixing-hyper-v-resolution-powershell" aria-label="10. Fixing Hyper-V Resolution (Powershell)">10. Fixing Hyper-V Resolution (Powershell)</a></li>
                <li>
                    <a href="#11-start-the-vm" aria-label="11. Start the VM">11. Start the VM</a></li></ul>
                </li>
                <li>
                    <a href="#installing-arch-linux" aria-label="Installing Arch Linux">Installing Arch Linux</a><ul>
                        
                <li>
                    <a href="#1-verify-internet-connection" aria-label="1. Verify Internet Connection">1. Verify Internet Connection</a></li>
                <li>
                    <a href="#2-synchronise-system-clock" aria-label="2. Synchronise System Clock">2. Synchronise System Clock</a></li>
                <li>
                    <a href="#3-drive-partitioning" aria-label="3. Drive Partitioning">3. Drive Partitioning</a></li>
                <li>
                    <a href="#4-creating-file-systems" aria-label="4. Creating File Systems">4. Creating File Systems</a></li>
                <li>
                    <a href="#5-mounting-the-file-systems" aria-label="5. Mounting the File Systems">5. Mounting the File Systems</a></li>
                <li>
                    <a href="#6-installing-essential-packages" aria-label="6. Installing Essential Packages">6. Installing Essential Packages</a></li>
                <li>
                    <a href="#7-generate-fstab-configuration" aria-label="7. Generate fstab Configuration">7. Generate fstab Configuration</a></li>
                <li>
                    <a href="#8-chroot" aria-label="8. Chroot">8. Chroot</a></li>
                <li>
                    <a href="#9-install-key-packages" aria-label="9. Install Key Packages">9. Install Key Packages</a></li>
                <li>
                    <a href="#10-auto-enable-internet-on-startup" aria-label="10. Auto-enable Internet on Startup">10. Auto-enable Internet on Startup</a></li>
                <li>
                    <a href="#11-install-and-configure-grub" aria-label="11. Install and Configure Grub">11. Install and Configure Grub</a></li>
                <li>
                    <a href="#12-set-root-password" aria-label="12. Set Root Password">12. Set Root Password</a></li>
                <li>
                    <a href="#13-localization" aria-label="13. Localization">13. Localization</a></li>
                <li>
                    <a href="#14-hostname" aria-label="14. Hostname">14. Hostname</a></li>
                <li>
                    <a href="#15-timezone" aria-label="15. Timezone">15. Timezone</a></li>
                <li>
                    <a href="#15-rebooting" aria-label="15. Rebooting">15. Rebooting</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h1>
<p>This guide details the installation procedure of Arch onto a Virtual Machine (VM). Network configuration is not in the scope of this guide if you are installing on bare metal.</p>
<p>The motivation behind this web page is to keep some guidance material for myself and also for anybody new looking to install Arch from scratch.</p>
<p>The virtual machine is made with Microsoft&rsquo;s Hyper-V program. The steps may differ slightly if you choose to use a another hypervisor such as VirtualBox.</p>
<h2 id="arch-linux-iso-download-link">Arch Linux ISO Download Link<a hidden class="anchor" aria-hidden="true" href="#arch-linux-iso-download-link">#</a></h2>
<p>You can find the download link to the Arch Linux ISO here: <a href="https://archlinux.org/download/">https://archlinux.org/download/</a></p>
<p>The recommended way to pull down the ISO file is by torrenting it from the referenced magnet link.</p>
<p>When the download is complete, you can configure your virtual machine.</p>
<h2 id="creating-a-hyper-v-virtual-machine">Creating a Hyper-V Virtual Machine<a hidden class="anchor" aria-hidden="true" href="#creating-a-hyper-v-virtual-machine">#</a></h2>
<h3 id="1-create-new-virtual-machine">1. Create New Virtual Machine<a hidden class="anchor" aria-hidden="true" href="#1-create-new-virtual-machine">#</a></h3>
<p>The first step is to open up Hyper-V and create a new virtual machine
<img loading="lazy" src="/img/arch/install_process/1.jpg#center" alt=""  />
</p>
<h3 id="2-select-vm-generation">2. Select VM Generation<a hidden class="anchor" aria-hidden="true" href="#2-select-vm-generation">#</a></h3>
<p>You will be asked which generation of VM to create. I would reccommend to select &ldquo;Generation 2&rdquo;. It supports UEFI firmware and it should be better from a cyber-security standpoint.
<img loading="lazy" src="/img/arch/install_process/2.jpg#center" alt=""  />
</p>
<h3 id="3-allocate-memory">3. Allocate Memory<a hidden class="anchor" aria-hidden="true" href="#3-allocate-memory">#</a></h3>
<p>You can specify how much memory to allocate to the VM. I decided to allocate 4000MB in my use case.
<img loading="lazy" src="/img/arch/install_process/3.jpg#center" alt=""  />
</p>
<h3 id="4-configure-network-adapter">4. Configure Network Adapter<a hidden class="anchor" aria-hidden="true" href="#4-configure-network-adapter">#</a></h3>
<p>Hyper-V has a built in network adapter that works out of the box, so you&rsquo;d want to select &ldquo;Default Switch&rdquo; to have it enabled.
<img loading="lazy" src="/img/arch/install_process/4.jpg#center" alt=""  />
</p>
<h3 id="5-create-virtual-hard-disk">5. Create Virtual Hard Disk<a hidden class="anchor" aria-hidden="true" href="#5-create-virtual-hard-disk">#</a></h3>
<p>For the VM you should create a virtual hard disk to store the data. I decided to allocate 30GB of storage space.
<img loading="lazy" src="/img/arch/install_process/5.jpg#center" alt=""  />
</p>
<h3 id="6-select-iso-image">6. Select .iso Image<a hidden class="anchor" aria-hidden="true" href="#6-select-iso-image">#</a></h3>
<p>You need to select the arch linux ISO file to boot from and then you can finalise the VM creation.
<img loading="lazy" src="/img/arch/install_process/6.jpg#center" alt=""  />
</p>
<h3 id="7-go-to-settings">7. Go to Settings<a hidden class="anchor" aria-hidden="true" href="#7-go-to-settings">#</a></h3>
<p>We are not done yet, we still need to configure 2 more things in the settings panel of this VM we just created.
<img loading="lazy" src="/img/arch/install_process/7.jpg#center" alt=""  />
</p>
<h3 id="8-disable-secure-boot">8. Disable Secure Boot<a hidden class="anchor" aria-hidden="true" href="#8-disable-secure-boot">#</a></h3>
<p>We need to <strong>disable Secure Boot</strong>, if you do not do this step, it will interfere with your ability to boot the ISO image.
<img loading="lazy" src="/img/arch/install_process/8.jpg#center" alt=""  />
</p>
<h3 id="9-change-boot-priority">9. Change Boot Priority<a hidden class="anchor" aria-hidden="true" href="#9-change-boot-priority">#</a></h3>
<p>Next we need to <strong>bump the Hard Drive to the first priority of boot loading</strong>. Its very important that you do this step before you start installing linux otherwise the Grub will fail down the line because it will be trying to boot from the DVD Drive. You will not be able to retroactively change the boot order at a later stage.
<img loading="lazy" src="/img/arch/install_process/9.jpg#center" alt=""  />

After applying the changes:</p>
<h3 id="10-fixing-hyper-v-resolution-powershell">10. Fixing Hyper-V Resolution (Powershell)<a hidden class="anchor" aria-hidden="true" href="#10-fixing-hyper-v-resolution-powershell">#</a></h3>
<p>Oddly enough we do not have GUI setting for adjusting the resolution of the VM which is bizzare for a windows tool. Therefore we will need to use Powershell (with Admin permissions) to fix this.</p>
<p>In powershell you can run the following command to set the maximum resolution of the VM <strong>(Please replace the respective VMName in quotations with the VM you just created.)</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>Set-VMVideo -VMName <span style="color:#e6db74">&#39;ArchVM&#39;</span> -HorizontalResolution <span style="color:#ae81ff">1920</span> -VerticalResolution <span style="color:#ae81ff">1080</span> -ResolutionType Single
</span></span></code></pre></div><h3 id="11-start-the-vm">11. Start the VM<a hidden class="anchor" aria-hidden="true" href="#11-start-the-vm">#</a></h3>
<p>Connect to the VM:
<img loading="lazy" src="/img/arch/install_process/10.jpg#center" alt=""  />

Start the VM:
<img loading="lazy" src="/img/arch/install_process/11.jpg#center" alt=""  />
</p>
<h2 id="installing-arch-linux">Installing Arch Linux<a hidden class="anchor" aria-hidden="true" href="#installing-arch-linux">#</a></h2>
<p>From this screen select the highlighted option to load the ISO image
<img loading="lazy" src="/img/arch/install_process/12.jpg#center" alt=""  />
</p>
<p>The install process starts here:
<img loading="lazy" src="/img/arch/install_process/13.jpg#center" alt=""  />
</p>
<h3 id="1-verify-internet-connection">1. Verify Internet Connection<a hidden class="anchor" aria-hidden="true" href="#1-verify-internet-connection">#</a></h3>
<p>Before going any further, you should ping a website to test your internet connection:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ping archlinux.org
</span></span></code></pre></div><p><img loading="lazy" src="/img/arch/install_process/14.jpg#center" alt=""  />

The Hyper-V default network switch should automatically provide your VM with the internet connection. If not, you will probably need to configure Hyper-V to alleviate networking issues.</p>
<h3 id="2-synchronise-system-clock">2. Synchronise System Clock<a hidden class="anchor" aria-hidden="true" href="#2-synchronise-system-clock">#</a></h3>
<p>We also need to synchronise the systems clock with the network time:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>timedatectl set-ntp true
</span></span></code></pre></div><h3 id="3-drive-partitioning">3. Drive Partitioning<a hidden class="anchor" aria-hidden="true" href="#3-drive-partitioning">#</a></h3>
<p>Now we need to start partitioning our drives and creating our file system.</p>
<p>The <strong>lsblk</strong> command indicates which drives and partitions are on your system. And we can use <strong>cfdisk</strong> to partition the drives.
<img loading="lazy" src="/img/arch/install_process/16.jpg#center" alt=""  />
</p>
<p>Type the command to start partitioning your virtualised disk:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cfdisk /dev/sda
</span></span></code></pre></div><p><img loading="lazy" src="/img/arch/install_process/18.jpg#center" alt=""  />
</p>
<p>At this juncture we need to assign the disk label type and it comes down to two options mainly:</p>
<ul>
<li>If the hardware is new and the drive &gt;= 2TB, use <strong>gpt</strong>.</li>
<li>Otherwise use <strong>dos</strong>.</li>
</ul>
<blockquote>
<p><em><strong>For our scenario we are using dos</strong></em></p>
</blockquote>
<p>Decide on a partition scheme. I will keep it simple and reduce it to a <strong>boot and root partition</strong>:</p>
<ul>
<li><strong>/dev/sda1 (boot partition)</strong> only needs about <strong>128MB</strong> of space and needs to be bootable. You can <strong>press b to enable the boot flag</strong> after making the partition.</li>
<li><strong>/dev/sda2 (root partition)</strong> can be assigned the <strong>remaining space of the disk</strong>.</li>
</ul>
<p>Write the changes and quit out of cfdisk.
<img loading="lazy" src="/img/arch/install_process/19.jpg#center" alt=""  />

If you <strong>lsblk</strong> now, you will now see that 2 partitions have been made which are called <strong>sda1 and sda2</strong>.</p>
<h3 id="4-creating-file-systems">4. Creating File Systems<a hidden class="anchor" aria-hidden="true" href="#4-creating-file-systems">#</a></h3>
<p>We also need to make the file systems for each partition:</p>
<ul>
<li><strong>sda1 (boot)</strong> is <strong>FAT32</strong> file system.</li>
<li><strong>sda2 (root)</strong> is <strong>ext4</strong> file system.</li>
</ul>
<p>Run these commands to create the file systems respectively:</p>
<pre tabindex="0"><code class="language-[bash]" data-lang="[bash]">mkfs.fat -F 32 /dev/sda1
mkfs.ext4 /dev/sda2
</code></pre><h3 id="5-mounting-the-file-systems">5. Mounting the File Systems<a hidden class="anchor" aria-hidden="true" href="#5-mounting-the-file-systems">#</a></h3>
<p>Now the mounting procedure MUST go in a specific order:</p>
<ul>
<li><strong>sda2 (root)</strong> is mounted first to <strong>/mnt</strong></li>
<li><strong>sda1 (boot)</strong> is mounted last to <strong>/mnt/boot/efi</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mount /dev/sda2 /mnt
</span></span></code></pre></div><blockquote>
<p><strong>Warning:</strong> If you mount in reverse order, the install will fail!</p>
</blockquote>
<p>For the boot partition, you will need to make a directory with this path <strong>/mnt/boot/efi</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd /mnt
</span></span><span style="display:flex;"><span>mkdir boot
</span></span><span style="display:flex;"><span>cd /mnt/boot
</span></span><span style="display:flex;"><span>mkdir efi
</span></span></code></pre></div><p>Since we have a UEFI system config, we need this extra efi directory (normally we do not). Now we can mount the filesystem for boot:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mount /dev/sda1 /mnt/boot/efi
</span></span></code></pre></div><h3 id="6-installing-essential-packages">6. Installing Essential Packages<a hidden class="anchor" aria-hidden="true" href="#6-installing-essential-packages">#</a></h3>
<p>At this stage, you are ready install the base tools for the system in addition to the Linux kernel.</p>
<p>Use the pacstrap command to install the following tools to /mnt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pacstrap /mnt base base-devel linux linux-firmware vim
</span></span></code></pre></div><h3 id="7-generate-fstab-configuration">7. Generate fstab Configuration<a hidden class="anchor" aria-hidden="true" href="#7-generate-fstab-configuration">#</a></h3>
<p>Run the following command to generate your fstab configuration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</span></span><span style="display:flex;"><span>genfstab -U /mnt
</span></span></code></pre></div><h3 id="8-chroot">8. Chroot<a hidden class="anchor" aria-hidden="true" href="#8-chroot">#</a></h3>
<p>Change root into new system by running this command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>arch-chroot /mnt /bin/bash
</span></span></code></pre></div><h3 id="9-install-key-packages">9. Install Key Packages<a hidden class="anchor" aria-hidden="true" href="#9-install-key-packages">#</a></h3>
<p>Pacman is our package manager and we can use it to install some key packages:</p>
<ul>
<li>networkmanager - Detection and configuration of systems to connect to networks</li>
<li>grub - Bootloader for the computer</li>
<li>efibootmgr - Package dependency for grub&rsquo;s installation command</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pacman -S networkmanager grub efibootmgr
</span></span></code></pre></div><h3 id="10-auto-enable-internet-on-startup">10. Auto-enable Internet on Startup<a hidden class="anchor" aria-hidden="true" href="#10-auto-enable-internet-on-startup">#</a></h3>
<p>We can use systemctl to enable network manager as a service which starts automatically when you boot the computer (which is very useful to have).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl enable NetworkManager
</span></span></code></pre></div><h3 id="11-install-and-configure-grub">11. Install and Configure Grub<a hidden class="anchor" aria-hidden="true" href="#11-install-and-configure-grub">#</a></h3>
<p>Next we run the grub-install command on /dev/sda; it should run with no errors:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grub-install /dev/sda
</span></span></code></pre></div><p>We need to make a config file for grub, with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grub-mkconfig -o /boot/grub/grub.cfg
</span></span></code></pre></div><p>We need to edit this grub file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /etc/default/grub
</span></span></code></pre></div><p>Uncomment the line &ldquo;GRUB_DISABLE_OS_PROBER=false&rdquo; and then save the file.</p>
<p><img loading="lazy" src="/img/arch/install_process/31.jpg#center" alt=""  />
</p>
<p>You may also want to edit the following grub variables if you wish to change the resolution of grub:</p>
<ul>
<li>GRUB_CMD_LINUX_DEFAULT</li>
<li>GRUB_GFXMODE</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>GRUB_CMD_LINUX_DEFAULT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;quiet splash video=hyperv_fb:1920x1080&#34;</span>
</span></span><span style="display:flex;"><span>GRUB_GFXMODE<span style="color:#f92672">=</span>1920x1080
</span></span></code></pre></div><p><em><strong>Note: The video parameter may be different if you are doing this bare metal or are using another VM software.</strong></em></p>
<p>Save and exit from the grub file.</p>
<p>Now you will need to enact those changes onto the grub.cfg file which is read at boot time. So you will need to run the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grub-mkconfig -o /boot/grub/grub.cfg
</span></span></code></pre></div><p>After rebooting your Linux machine, your terminal should automatically scale to the 1080p resolution without having to make changes using commands like <strong>xrandr -s 1920x1080</strong> inside the display server.</p>
<h3 id="12-set-root-password">12. Set Root Password<a hidden class="anchor" aria-hidden="true" href="#12-set-root-password">#</a></h3>
<p>Run the passwd command to set a root password for the machine
<img loading="lazy" src="/img/arch/install_process/32.jpg#center" alt=""  />
</p>
<h3 id="13-localization">13. Localization<a hidden class="anchor" aria-hidden="true" href="#13-localization">#</a></h3>
<p>Edit <strong>/etc/locale.gen</strong> to change the language settings of the machine.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /etc/locale.gen
</span></span></code></pre></div><p>Uncomment the lines that apply to your language of choice.
<img loading="lazy" src="/img/arch/install_process/34.jpg#center" alt=""  />

Run <strong>locale-gen</strong> command to generate the locales you have selected:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>locale-gen
</span></span></code></pre></div><p>Edit /etc/locale.conf and set the language being used:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /etc/locale.conf
</span></span></code></pre></div><p>Enter the <strong>LANG variable</strong> into the file with the relevant language setting:</p>
<pre tabindex="0"><code>LANG=en_GB.UTF-8
</code></pre><h3 id="14-hostname">14. Hostname<a hidden class="anchor" aria-hidden="true" href="#14-hostname">#</a></h3>
<p>Edit <strong>/etc/hostname</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /etc/hostname
</span></span></code></pre></div><p>The word you type in here will be the name of your computer. I decided to call mine <strong>arch</strong>. But it can be anything you want. Save and close the file.</p>
<h3 id="15-timezone">15. Timezone<a hidden class="anchor" aria-hidden="true" href="#15-timezone">#</a></h3>
<p>You can set the time zone with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ln -sf /usr/share/zoneinfo/Greenwich /etc/localtime
</span></span></code></pre></div><p>Greenwich can be substituted for any region within that zoneinfo directory.</p>
<h3 id="15-rebooting">15. Rebooting<a hidden class="anchor" aria-hidden="true" href="#15-rebooting">#</a></h3>
<p>We are ready to reboot the system. First we need to exit the root environment and to unmount all the partitions. Then we can reboot.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>exit
</span></span><span style="display:flex;"><span>umount -R /mnt
</span></span><span style="display:flex;"><span>reboot
</span></span></code></pre></div><p>If successful you should be greeted with this screen. You can select <strong>Arch Linux</strong> to boot into the system.
<img loading="lazy" src="/img/arch/install_process/42.jpg#center" alt=""  />

And you should see a tty appear on your screen.</p>
<p>We do not have any users set up on the system (yet).</p>
<p>Simply login as the <strong>root</strong> user. The root password is what you set earlier in the setup process.</p>
<p><img loading="lazy" src="/img/arch/install_process/45.jpg#center" alt=""  />

That&rsquo;s about it, you now have a base install of Arch Linux.</p>
<p>From this point you are free to customise your desktop to your liking.</p>



  </div>


  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://filpill.github.io/tags/-systems/">üíª Systems</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://filpill.github.io/projects/2023-06-07-radio-control-setup/">
    <span class="title">¬´ Prev</span>
    <br>
    <span>How to Set Up Your Radio Controlled System</span>
  </a>
  <a class="next" href="https://filpill.github.io/projects/2023-04-10-chess-data/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>Chess.com API - Data Visualisation</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://filpill.github.io/">Filip Livancic</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
