<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Web Scraper - Valorant Data Analysis | Filip Livancic</title>
<meta name="keywords" content="scrapy, json, webscraping, programming">
<meta name="description" content="Summary I was originally looking for a Valorant API to analyse some of my own match data, however Riot games do not hand out personal API keys for this game.
I figured I could scrape some of my own match data which is publically available on the web client side.
Though the data is fairly limited due to built in limitations of the Riot Valorant API. The website only pulls 30 matches worth of data.">
<meta name="author" content="">
<link rel="canonical" href="https://filpill.github.io/projects/val_scrp/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.1740750342264a4e69b84ddf6899fb02cc95465080d85c57c08bb1d110900bf6.css" integrity="sha256-F0B1A0ImSk5puE3faJn7AsyVRlCA2FxXwIux0RCQC/Y=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://filpill.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://filpill.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://filpill.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://filpill.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://filpill.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Web Scraper - Valorant Data Analysis" />
<meta property="og:description" content="Summary I was originally looking for a Valorant API to analyse some of my own match data, however Riot games do not hand out personal API keys for this game.
I figured I could scrape some of my own match data which is publically available on the web client side.
Though the data is fairly limited due to built in limitations of the Riot Valorant API. The website only pulls 30 matches worth of data." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://filpill.github.io/projects/val_scrp/" />
<meta property="og:image" content="https://filpill.github.io/img/val/val_logo.jpg" /><meta property="article:section" content="projects" />
<meta property="article:published_time" content="2022-06-13T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2022-06-13T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://filpill.github.io/img/val/val_logo.jpg" />
<meta name="twitter:title" content="Web Scraper - Valorant Data Analysis"/>
<meta name="twitter:description" content="Summary I was originally looking for a Valorant API to analyse some of my own match data, however Riot games do not hand out personal API keys for this game.
I figured I could scrape some of my own match data which is publically available on the web client side.
Though the data is fairly limited due to built in limitations of the Riot Valorant API. The website only pulls 30 matches worth of data."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Projects",
      "item": "https://filpill.github.io/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Web Scraper - Valorant Data Analysis",
      "item": "https://filpill.github.io/projects/val_scrp/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Web Scraper - Valorant Data Analysis",
  "name": "Web Scraper - Valorant Data Analysis",
  "description": "Summary I was originally looking for a Valorant API to analyse some of my own match data, however Riot games do not hand out personal API keys for this game.\nI figured I could scrape some of my own match data which is publically available on the web client side.\nThough the data is fairly limited due to built in limitations of the Riot Valorant API. The website only pulls 30 matches worth of data.",
  "keywords": [
    "scrapy", "json", "webscraping", "programming"
  ],
  "articleBody": "Summary I was originally looking for a Valorant API to analyse some of my own match data, however Riot games do not hand out personal API keys for this game.\nI figured I could scrape some of my own match data which is publically available on the web client side.\nThough the data is fairly limited due to built in limitations of the Riot Valorant API. The website only pulls 30 matches worth of data.\nStill it was worth learning about the web-scraping process and adding to the toolkit.\nWeb Scraper I decided to use a module called “scrapy” as my web-scrapping tool and the website being interrogated was https://dak.gg/valorant/en/profile/FilPill-EUW\nInitially, I tried to parse out the HTML classes within the div’s however it did not work. Despite the data being kept inside the HTML tags,I could not access them with my scraper.\nWhen I simulated the webscraper opening the website, it did not return any data at all. Just an empty HTML template of a website. Soonafter, I realised that javascript is being employed to load the data into the front-end dynamically.\nI changed my approach after this realisation. After inspecting the web elements in the XHR/Fetch within the network tab of my browsers inspect element, I found an https request which returns JSON data.\nThis is the final iteration of the spider I developed to scrape my match data:\nimport scrapy import json class PlayerState(scrapy.Spider): name = 'playerState' start_urls = ['https://dak.gg/valorant/en/profile/FilPill-EUW'] headers = { \"accept\":\" application/json, text/plain, */*\" } def parse(self, response): url = 'https://val.dakgg.io/api/v1/accounts/JPnyLxsiavseiYbL8xtmWSuFRHdupX43u_hVynD5YScr2_Y32Wt2v5K-NvxvfDRWTL67AHdVSmoLTg/matches' request = scrapy.Request(url, callback = self.parse_api, headers=self.headers) yield request def parse_api(self,response): raw_data = response.body data = json.loads(raw_data) yield { 'matches':data['matches'] } The spider script is suprisingly short, however it returns all my match data from the page.\nData Analysis Since we are only pulling out 30 matches, we are fairly limited in visualising our data. In the future I may attempt to scrape out bigger pools of data of the player base to perform some big data analysis. Will have to figure out an elegant way to do it.\nFor now I made some basic analysis with my jupyter notebook, some of which is derivative of the scraped data:\n ",
  "wordCount" : "366",
  "inLanguage": "en",
  "image":"https://filpill.github.io/img/val/val_logo.jpg","datePublished": "2022-06-13T00:00:00Z",
  "dateModified": "2022-06-13T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://filpill.github.io/projects/val_scrp/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Filip Livancic",
    "logo": {
      "@type": "ImageObject",
      "url": "https://filpill.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://filpill.github.io/" accesskey="h" title="Filip Livancic (Alt + H)">Filip Livancic</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://filpill.github.io/profile/" title="Profile">
                    <span>Profile</span>
                </a>
            </li>
            <li>
                <a href="https://filpill.github.io/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="https://filpill.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://filpill.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://filpill.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://filpill.github.io/projects/">Projects</a></div>
    <h1 class="post-title">
      Web Scraper - Valorant Data Analysis<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>
    </h1>
    <div class="post-meta"><span title='2022-06-13 00:00:00 +0000 UTC'>June 13, 2022</span>

</div>
  </header> 
<figure class="entry-cover"><a href="https://filpill.github.io/img/val/val_logo.jpg" target="_blank"
            rel="noopener noreferrer"><img loading="lazy" src="https://filpill.github.io/img/val/val_logo.jpg" alt="Valorant logo"></a>
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#summary" aria-label="Summary">Summary</a></li>
                <li>
                    <a href="#web-scraper" aria-label="Web Scraper">Web Scraper</a></li>
                <li>
                    <a href="#data-analysis" aria-label="Data Analysis">Data Analysis</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="summary">Summary<a hidden class="anchor" aria-hidden="true" href="#summary">#</a></h1>
<p>I was originally looking for a Valorant API to analyse some of my own match data, however Riot games do not hand out personal API keys for this game.</p>
<p>I figured I could scrape some of my own match data which is publically available on the web client side.</p>
<p>Though the data is fairly limited due to built in limitations of the Riot Valorant API. The website only pulls 30 matches worth of data.</p>
<p>Still it was worth learning about the web-scraping process and adding to the toolkit.</p>
<h1 id="web-scraper">Web Scraper<a hidden class="anchor" aria-hidden="true" href="#web-scraper">#</a></h1>
<p>I decided to use a module called &ldquo;scrapy&rdquo; as my web-scrapping tool and the website being interrogated was <a href="https://dak.gg/valorant/en/profile/FilPill-EUW">https://dak.gg/valorant/en/profile/FilPill-EUW</a></p>
<p>Initially, I tried to parse out the HTML classes within the div&rsquo;s however it did not work. Despite the data being kept inside the HTML tags,I could not access them with my scraper.</p>
<p>When I simulated the webscraper opening the website, it did not return any data at all. Just an empty HTML template of a website. Soonafter, I realised that javascript is being employed to load the data into the front-end dynamically.</p>
<p>I changed my approach after this realisation. After inspecting the web elements in the XHR/Fetch within the network tab of my browsers inspect element, I found an https request which returns JSON data.</p>
<p>This is the final iteration of the spider I developed to scrape my match data:</p>
<pre tabindex="0"><code class="language-[zsh]" data-lang="[zsh]">import scrapy
import json

class PlayerState(scrapy.Spider):
    name = &#39;playerState&#39;
    start_urls =  [&#39;https://dak.gg/valorant/en/profile/FilPill-EUW&#39;]
    headers = {
   &#34;accept&#34;:&#34; application/json, text/plain, */*&#34;
    }

    def parse(self, response):
        url = &#39;https://val.dakgg.io/api/v1/accounts/JPnyLxsiavseiYbL8xtmWSuFRHdupX43u_hVynD5YScr2_Y32Wt2v5K-NvxvfDRWTL67AHdVSmoLTg/matches&#39;

        request = scrapy.Request(url,
                                 callback = self.parse_api,
                                 headers=self.headers)
        yield request

    def parse_api(self,response):
        raw_data = response.body
        data = json.loads(raw_data)
        yield {
               &#39;matches&#39;:data[&#39;matches&#39;]
        }
</code></pre><p>The spider script is suprisingly short, however it returns all my match data from the page.</p>
<h1 id="data-analysis">Data Analysis<a hidden class="anchor" aria-hidden="true" href="#data-analysis">#</a></h1>
<p>Since we are only pulling out 30 matches, we are fairly limited in visualising our data. In the future I may attempt to scrape out bigger pools of data of the player base to perform some big data analysis. Will have to figure out an elegant way to do it.</p>
<p>For now I made some basic analysis with my jupyter notebook, some of which is derivative of the scraped data:</p>
<p>

	<img src="/img/val/kill_death.png" width="720"  />




	<img src="/img/val/map_wins.png" width="720"  />

</p>



  </div>


  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://filpill.github.io/tags/scrapy/">scrapy</a></li>
      <li><a href="https://filpill.github.io/tags/json/">json</a></li>
      <li><a href="https://filpill.github.io/tags/webscraping/">webscraping</a></li>
      <li><a href="https://filpill.github.io/tags/programming/">programming</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://filpill.github.io/projects/codewars/">
    <span class="title">« Prev</span>
    <br>
    <span>Codewars - Solving Coding Problems</span>
  </a>
  <a class="next" href="https://filpill.github.io/projects/hugo/">
    <span class="title">Next »</span>
    <br>
    <span>Front-end Design - Static Site Generator</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://filpill.github.io/">Filip Livancic</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
